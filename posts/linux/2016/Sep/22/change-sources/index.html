<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Linux 修改镜像源加快下载速度(pip-RubyGems-NPM-Docker) — HmyBmny's Homepage</title>
	<meta name="description" content="Title: Linux 修改镜像源加快下载速度(pip-RubyGems-NPM-Docker); Date: 2016-09-22; Author: HmyBmny">
	<meta name="author" content="HmyBmny">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/theme/css/main.css">
	<link rel="stylesheet" href="/theme/css/notebook.css">
</head>
<body>
    <div id="container">
        <div id="header">
            <h2>
                <small>Linux 修改镜像源加快下载速度(pip-RubyGems-NPM-Docker)</small>
            </h2>
        </div>
        <div id="main">
            <div id="article">
                <a href="/">Back to the Homepage</a>
                <div id="article-body">
                    <p>请记住以下配置当前用户和 <code>root</code> 用户的都需要修改，否则使用 <code>sudo</code> 或者 <code>root</code> 用户模式下使用的依旧是官方源。</p>
<p><strong>pip:</strong></p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> ~/ <span class="o">&amp;&amp;</span> mkdir .pip <span class="o">&amp;&amp;</span> <span class="nb">cd</span> .pip/
touch pip.conf
<span class="nb">echo</span> <span class="s2">&quot;[global]&quot;</span>&gt;&gt;pip.conf
<span class="nb">echo</span> <span class="s2">&quot;index-url = https://pypi.tuna.tsinghua.edu.cn/simple&quot;</span>&gt;&gt;pip.conf
</pre></div>


<p><strong>RubyGems:</strong></p>
<div class="highlight"><pre><span></span>gem sources --remove https://rubygems.org/  <span class="c1">#移除默认源</span>
gem sources -a https://mirrors.ustc.edu.cn/rubygems/  <span class="c1">#添加中科大源</span>
gem sources -l  <span class="c1"># 查看当前源，确保只有 mirrors.ustc.edu.cn/rubygems</span>
</pre></div>


<div class="highlight"><pre><span></span>gem sources --add https://ruby.taobao.org/ --remove https://rubygems.org/
gem sources -l  <span class="c1"># 查看当前源，确保只有 ruby.taobao.org</span>
</pre></div>


<p><strong>NPM:</strong></p>
<p>在 <code>~/.npmrc</code> 中添加：</p>
<div class="highlight"><pre><span></span><span class="nv">registry</span><span class="o">=</span>http://npmreg.mirrors.ustc.edu.cn/
</pre></div>


<p>你也可以使用淘宝定制的 <code>cnpm</code> (<code>gzip</code> 压缩支持) 命令行工具代替默认的 <code>npm</code>:</p>
<div class="highlight"><pre><span></span>npm install -g cnpm --registry<span class="o">=</span>https://registry.npm.taobao.org
</pre></div>


<p>或者你直接通过添加 <code>npm</code> 参数 <code>alias</code> 一个新命令:</p>
<div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">cnpm</span><span class="o">=</span><span class="s2">&quot;npm --registry=https://registry.npm.taobao.org \</span>
<span class="s2">                    --cache=</span><span class="nv">$HOME</span><span class="s2">/.npm/.cache/cnpm \</span>
<span class="s2">                    --disturl=https://npm.taobao.org/dist \</span>
<span class="s2">                    --userconfig=</span><span class="nv">$HOME</span><span class="s2">/.cnpmrc&quot;</span>
</pre></div>


<p>之后使用 <code>cnpm install [name]</code> 安装模块。</p>
<p><strong>Docker:</strong></p>
<p>在 <code>/etc/docker/daemon.json</code> 文件中添加：</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;registry-mirrors&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>同时 <code>DaoCloud</code> 提供加速工具解决访问 <code>Docker Hub</code> 速度过慢的问题。具体请参考 <a href="https://www.daocloud.io/mirror">https://www.daocloud.io/mirror</a></p>
<p><strong>教育网的用户推荐添加清华源或者中科大源，这样速度会快很多，能达到几兆每秒。</strong></p>
<p>参考资料</p>
<ol>
<li><a href="https://lug.ustc.edu.cn/wiki/mirrors/help">开源镜像使用帮助列表 [LUG@USTC]</a></li>
<li><a href="https://ruby.taobao.org/">RubyGems 镜像</a></li>
<li><a href="https://npm.taobao.org/">淘宝 NPM 镜像</a></li>
</ol>
                </div>
                <div>
                    Category:
                    <span>
                        <a href="/category/linux.html" rel="category">Linux</a>
                    </span>
                </div>
 
                <div>
                    Tags:
                    <span>
                        <a href="/tag/pip.html" rel="tag">pip</a>
                    </span>
                    <span>
                        <a href="/tag/rubygems.html" rel="tag">RubyGems</a>
                    </span>
                    <span>
                        <a href="/tag/npm.html" rel="tag">NPM</a>
                    </span>
                    <span>
                        <a href="/tag/docker.html" rel="tag">Docker</a>
                    </span>
                </div>
                <h4>Comments</h4>
                Want to leave a comment? Visit <a href="https://github.com/HmyBmny/hmybmny.github.io/issues/3" target="_blank"> this post's issue page on GitHub</a> (you'll need a GitHub account.)
                <div id="comments">
                </div>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
    function loadComments(data) {
        for (var i=0; i<data.length; i++) {
            var cuser = data[i].user.login;
            var cuserlink = "https://github.com/" + data[i].user.login;
            var clink = "https://github.com/HmyBmny/hmybmny.github.io/issues/3#issuecomment-" + data[i].url.substring(data[i].url.lastIndexOf("/")+1);
            var cbody = data[i].body;
            var cavatarlink = data[i].user.avatar_url;
            var options = { year: 'numeric', month: 'short', day: 'numeric', hour:'2-digit', minute:'2-digit' };
            var cdate = new Date(data[i].created_at).toLocaleString("en", options);
            $("#comments").append("<div id='comment'><a href=\""+ cuserlink +'\"><img src="' + cavatarlink + '" width="32" height="32">' + "</a> &nbsp; <a href=\""+ cuserlink + "\">" + cuser + "</a> &nbsp; commented on &nbsp; <a href=\"" + clink + "\">" + cdate + "</a>" + "<p>" + cbody + " </p></div>");
        }
    }
    $.ajax("https://api.github.com/repos/HmyBmny/hmybmny.github.io/issues/3/comments", {
        headers: {Accept: "application/vnd.github.full+json"},
        cache: false,
        async: false,
        dataType: "json",
        success: function(msg){
        loadComments(msg);
        }
    });
});
</script>
            </div>
        </div>
        <div id="footer">
            <p>
                <a href="/about">About</a>
                |
                <a href="https://github.com/HmyBmny">GitHub</a>
                .
            </p>
            <p>
                Design by HmyBmny
                .
            </p>
            <p>Original articles on this site are CC <a href='https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode'>BY-NC-SA</a> licensed unless otherwise stated.</p>
        </div>
    </div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-82640425-1', 'auto');
   ga('send', 'pageview');

</script>
</body>
</html>